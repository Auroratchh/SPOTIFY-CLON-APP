<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" 
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <div class="search-page">
    
        <div class="search-header">
            <a routerLink="/" class="back-btn">
                <i class="fa-solid fa-arrow-left"></i> Volver
            </a>
            <h1>
                <i class="fa-solid fa-magnifying-glass"></i> Buscar MÃºsica
            </h1>
        </div>

        <app-search-bar (searchQuery)="onSearch($event)"></app-search-bar>

        @if (isLoading) {
            <app-loading-state></app-loading-state>
        }

        @if (searchResults && !isLoading) {
            <div class="results-container">
        
                @if (searchResults.tracks?.items?.length > 0) {
                    <app-track-list 
                        [tracks]="searchResults.tracks.items"
                        (trackSelected)="playTrack($event)">
                    </app-track-list>
                }

                @if (searchResults.albums?.items?.length > 0) {
                    <app-album-list 
                        [albums]="searchResults.albums.items"
                        (albumSelected)="playAlbum($event)">
                    </app-album-list>
                }
            </div>
        }

        @if (!hasSearched && !isLoading) {
            <app-state [type]="'initial'"></app-state>
        }

        @if (hasSearched && !isLoading && searchResults?.tracks?.items?.length === 0) {
            <app-state [type]="'no-results'"></app-state>
        }
    </div>
</body>
</html>